import{u as g,r as m,j as e,B as p,R as C,s as S,ah as j}from"./index-B29v6BxU.js";import{u as v}from"./useCopyText.hooks-ZnP4Qh_q.js";import{I as T}from"./InputOutputLayout.component-BoBRvJwD.js";import{C as h}from"./CodeEditor.component-B5BAun56.js";import{x as z}from"./xml-sample-CGegDIhy.js";import{l as R}from"./index-DJ1Id49b.js";import{S as b}from"./index-DPoiLd4a.js";import{R as _}from"./ArrowRightOutlined-sZDoccLc.js";import{S as k}from"./index-4FXU7HAO.js";import"./editorWorker-CA1WEzK_.js";import"./___vite-browser-external_commonjs-proxy-CNpIUK_E.js";import"./gapSize-U1swVQyS.js";import"./useShowArrow-DoHM4MnH.js";import"./DownOutlined-DP9_ryZt.js";const x=o=>{const a=Number(o);if(!isNaN(a))return a;const s=o.toLowerCase();return s==="true"?!0:s==="false"?!1:o},I=o=>R.xml2json(o.xml,{spaces:o.indentSize,compact:!0,trim:!0,textFn:(s,t)=>{try{const i=Object.keys(t._parent).length,n=Object.keys(t._parent)[i-1];if(t._attributes){const c={};Object.entries(t._attributes).forEach(([l,u])=>{c[l]===void 0&&(c[l]=x(u))}),t._parent[n]={_value:x(s),_attributes:c}}else t._parent[n]=x(s)}catch{}}}),G=()=>{const o=g(),a=v(),s=m.useRef(null),t=m.useRef({xml:"",tabSize:2}),i=async()=>{var r;d(z),(r=s.current)==null||r.setValue(t.current.xml)},[n,c]=m.useState(null),l=()=>{try{f(),o(S())}catch(r){r.message.includes("outside of root node")?o(j("XML code needs to have a root node.")):o(j("Invalid XML"))}},u=()=>{a(n)},d=r=>{t.current.xml=r},y=r=>{t.current.tabSize=r;try{f()}catch{}},f=()=>{const r=I({xml:t.current.xml,indentSize:t.current.tabSize});c(r)};return e.jsx(T,{InputToolbar:e.jsxs(b,{children:[e.jsx(p,{size:"large",onClick:i,children:"Sample"}),e.jsx(p,{type:"primary",icon:e.jsx(_,{}),size:"large",onClick:l,children:"Convert"})]}),InputView:e.jsx(h,{ref:s,code:t.current.xml,language:"xml",onChange:d}),OutputToolbar:n===null?e.jsx(e.Fragment,{}):e.jsxs(b,{children:[e.jsx(k,{defaultValue:2,options:[{value:2,label:e.jsx(e.Fragment,{children:"2 spaces"})},{value:4,label:e.jsx(e.Fragment,{children:"4 spaces"})}],onChange:y}),e.jsx(p,{icon:e.jsx(C,{}),onClick:u,children:"Copy"})]}),OutputView:e.jsx(h,{code:n,language:"json",readonly:!0})})};export{G as default};
