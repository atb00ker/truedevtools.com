import{u as P,bX as C,r as u,j as e,B as h,P as N,ah as O,s as S}from"./index-B29v6BxU.js";import{I as E}from"./InputOutputLayout.component-BoBRvJwD.js";import{b as w,U as V,R as k,i as b,I as v,a as q}from"./isBase64Valid.utils-CIofl64r.js";import{f as T,B as $}from"./fromBlob-CKbC3pDf.js";import{F as p}from"./index-B1ozlsfn.js";import{S as I}from"./index-DPoiLd4a.js";import{R as G}from"./ArrowRightOutlined-sZDoccLc.js";import{R as a}from"./index-DcuTae_k.js";import"./useForceUpdate-DecOSriV.js";import"./row-BuWWOgRE.js";import"./gapSize-U1swVQyS.js";import"./useBubbleLock-Bi2E1go0.js";const U=async(m,r)=>new Promise(i=>{T(m,void 0,void 0,void 0,r).then(s=>{w(s).then(n=>{i({base64:n})})})}),Z=()=>{const m=P(),r=C(),[i]=p.useForm(),[s,n]=u.useState({file:null,format:r.pathname==="/jpg-to-png-converter"?"png":"jpeg"}),[d,f]=u.useState(""),[o,g]=u.useState(null);u.useEffect(()=>{const t={file:null,format:r.pathname==="/jpg-to-png-converter"?"png":"jpeg"};n(t),i.setFieldsValue(t),f(""),g(null)},[i,r]);const B=()=>{var x;if(!o)return;let t="png";const l=(x=/^data:image\/\w+;/.exec(o.base64))==null?void 0:x[0];l&&(t=l.slice(11,-1));const c=document.createElement("a");c.href=o.base64;const j=s.file.name.split(".");j.pop(),c.download=`${j.join(".")}.${t}`,c.click()},y=async()=>{if(!s.file){m(O("Need to select an image"));return}const t=await U(s.file,s.format);g({base64:t.base64,format:s.format}),m(S())},F=async t=>{const l=t.file.originFileObj,c=await w(l);f(c),n({...s,file:l})},R=t=>{n({...s,...t})};return e.jsx(E,{InputToolbar:e.jsx(I,{children:e.jsx(h,{type:"primary",icon:e.jsx(G,{}),size:"large",onClick:y,children:"Convert"})}),InputView:e.jsxs(p,{form:i,layout:"vertical",size:"large",requiredMark:"optional",initialValues:s,validateMessages:{required:"This field is required"},onValuesChange:R,children:[e.jsx(V,{name:"image",accept:"image/*",listType:"picture-card",showUploadList:!1,onChange:F,customRequest:()=>{},children:e.jsxs("button",{children:[e.jsx(k,{}),e.jsx("div",{className:"mt-2",children:"Select image"})]})}),b(d)&&e.jsx("div",{className:"mt-8 border border-solid border-gray-300 leading-0",children:e.jsx(v,{src:d})}),e.jsx(p.Item,{label:"Convert to format",name:"format",rules:[{required:!0}],className:"mt-8",children:e.jsxs(a.Group,{children:[e.jsx(a.Button,{value:"jpeg",children:"JPG"}),e.jsx(a.Button,{value:"png",children:"PNG"}),e.jsx(a.Button,{value:"webp",children:"WEBP"}),e.jsx(a.Button,{value:"bmp",children:"BMP"}),e.jsx(a.Button,{value:"gif",children:"GIF"})]})})]}),OutputToolbar:o===null?e.jsx(e.Fragment,{}):e.jsx(I,{children:e.jsx(h,{icon:e.jsx(q,{}),onClick:B,children:"Download"})}),OutputView:o&&b(o.base64)?e.jsx("div",{className:"border border-solid border-gray-300 leading-0",children:e.jsx($.Ribbon,{color:"green",text:`Format: ${o.format.toUpperCase()}`,children:e.jsx(v,{src:o.base64})})}):e.jsx("div",{className:"h-full min-h-[250px] flex items-center justify-center border border-solid border-gray-300",children:e.jsx(N,{})})})};export{Z as default};
