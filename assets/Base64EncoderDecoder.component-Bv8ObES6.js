import{u as D,r as l,j as e,B as x,R as O,s as k,ah as T}from"./index-CL14asXn.js";import{u as V}from"./useCopyText.hooks-C1MaivK6.js";import{I as z}from"./InputOutputLayout.component-2nQ5MSfz.js";import{C as j}from"./CodeEditor.component-B0O-GlEp.js";import{t as w}from"./text-sample-BTrN0aiQ.js";import{S as b}from"./index-XRM7WuMU.js";import{R as C}from"./index-BvHqt4ng.js";import{R as M}from"./ArrowRightOutlined-HowPytUt.js";import"./editorWorker-CA1WEzK_.js";import"./gapSize-U1swVQyS.js";import"./useBubbleLock-CkECnJx5.js";const U=o=>window.btoa(o),F=o=>window.atob(o),G=o=>{const s=atob(o),r=new Uint8Array(s.length);for(let a=0;a<r.length;a++)r[a]=s.charCodeAt(a);return String.fromCharCode(...new Uint16Array(r.buffer))},L=o=>{const s=new Uint16Array(o.length);for(let r=0;r<s.length;r++)s[r]=o.charCodeAt(r);return btoa(String.fromCharCode(...new Uint8Array(s.buffer)))},Z=()=>{const o=D(),s=V(),r=l.useRef(null),a=l.useRef({input:""}),[d,I]=l.useState("encode"),[h,R]=l.useState(""),A=()=>{var p;const t=d==="decode"?U(w):w;g(t),(p=r.current)==null||p.setValue(t)},S=l.useCallback((t,p)=>{let u="";if(p==="decode"){let n="",c="",m=0;try{n=F(t.input)}catch{m++}try{c=G(t.input)}catch{m++}if(m===2)throw new Error;if(n&&!c)u=n;else if(!n&&c)u=c;else if(n&&c){let f=0,y=0;for(let i=0;i<n.length;i++)n.charCodeAt(i)===0&&f++;for(let i=0;i<c.length;i++)c.charCodeAt(i)===0&&y++;f>y?u=c:u=n}}else try{u=U(t.input)}catch{u=L(t.input)}return u},[]),E=()=>{s(h)},v=t=>{I(t.target.value)},g=t=>{a.current.input=t},B=()=>{try{const t=S(a.current,d);R(t),o(k())}catch{o(T("Invalid input"))}};return e.jsx(z,{InputToolbar:e.jsxs(b,{children:[e.jsxs(C.Group,{value:d,onChange:v,children:[e.jsx(C,{value:"encode",children:"Encode"}),e.jsx(C,{value:"decode",children:"Decode"})]}),e.jsx(x,{size:"large",onClick:A,children:"Sample"}),e.jsx(x,{type:"primary",icon:e.jsx(M,{}),size:"large",onClick:B,children:d==="encode"?"Encode":"Decode"})]}),InputView:e.jsx(j,{ref:r,code:"",language:"text",onChange:g}),OutputToolbar:h===null?e.jsx(e.Fragment,{}):e.jsx(b,{children:e.jsx(x,{icon:e.jsx(O,{}),onClick:E,children:"Copy"})}),OutputView:e.jsx(j,{code:h,language:"text",readonly:!0})})};export{Z as default};
