import{r as se}from"./___vite-browser-external_commonjs-proxy-CNpIUK_E.js";var ce={};(function(i){(function(t){t.parser=function(n,e){return new l(n,e)},t.SAXParser=l,t.SAXStream=O,t.createStream=be,t.MAX_BUFFER_LENGTH=64*1024;var u=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];t.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function l(n,e){if(!(this instanceof l))return new l(n,e);var c=this;E(c),c.q=c.c="",c.bufferCheckPosition=t.MAX_BUFFER_LENGTH,c.opt=e||{},c.opt.lowercase=c.opt.lowercase||c.opt.lowercasetags,c.looseCase=c.opt.lowercase?"toLowerCase":"toUpperCase",c.tags=[],c.closed=c.closedRoot=c.sawRoot=!1,c.tag=c.error=null,c.strict=!!n,c.noscript=!!(n||c.opt.noscript),c.state=r.BEGIN,c.strictEntities=c.opt.strictEntities,c.ENTITIES=c.strictEntities?Object.create(t.XML_ENTITIES):Object.create(t.ENTITIES),c.attribList=[],c.opt.xmlns&&(c.ns=Object.create(Ie)),c.opt.unquotedAttributeValues===void 0&&(c.opt.unquotedAttributeValues=!n),c.trackPosition=c.opt.position!==!1,c.trackPosition&&(c.position=c.line=c.column=0),B(c,"onready")}Object.create||(Object.create=function(n){function e(){}e.prototype=n;var c=new e;return c}),Object.keys||(Object.keys=function(n){var e=[];for(var c in n)n.hasOwnProperty(c)&&e.push(c);return e});function o(n){for(var e=Math.max(t.MAX_BUFFER_LENGTH,10),c=0,a=0,d=u.length;a<d;a++){var F=n[u[a]].length;if(F>e)switch(u[a]){case"textNode":L(n);break;case"cdata":A(n,"oncdata",n.cdata),n.cdata="";break;case"script":A(n,"onscript",n.script),n.script="";break;default:U(n,"Max buffer length exceeded: "+u[a])}c=Math.max(c,F)}var b=t.MAX_BUFFER_LENGTH-c;n.bufferCheckPosition=b+n.position}function E(n){for(var e=0,c=u.length;e<c;e++)n[u[e]]=""}function g(n){L(n),n.cdata!==""&&(A(n,"oncdata",n.cdata),n.cdata=""),n.script!==""&&(A(n,"onscript",n.script),n.script="")}l.prototype={end:function(){te(this)},write:we,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){g(this)}};var y;try{y=se.Stream}catch{y=function(){}}y||(y=function(){});var J=t.EVENTS.filter(function(n){return n!=="error"&&n!=="end"});function be(n,e){return new O(n,e)}function O(n,e){if(!(this instanceof O))return new O(n,e);y.apply(this),this._parser=new l(n,e),this.writable=!0,this.readable=!0;var c=this;this._parser.onend=function(){c.emit("end")},this._parser.onerror=function(a){c.emit("error",a),c._parser.error=null},this._decoder=null,J.forEach(function(a){Object.defineProperty(c,"on"+a,{get:function(){return c._parser["on"+a]},set:function(d){if(!d)return c.removeAllListeners(a),c._parser["on"+a]=d,d;c.on(a,d)},enumerable:!0,configurable:!1})})}O.prototype=Object.create(y.prototype,{constructor:{value:O}}),O.prototype.write=function(n){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(n)){if(!this._decoder){var e=se.StringDecoder;this._decoder=new e("utf8")}n=this._decoder.write(n)}return this._parser.write(n.toString()),this.emit("data",n),!0},O.prototype.end=function(n){return n&&n.length&&this.write(n),this._parser.end(),!0},O.prototype.on=function(n,e){var c=this;return!c._parser["on"+n]&&J.indexOf(n)!==-1&&(c._parser["on"+n]=function(){var a=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);a.splice(0,0,n),c.emit.apply(c,a)}),y.prototype.on.call(c,n,e)};var _e="[CDATA[",he="DOCTYPE",j="http://www.w3.org/XML/1998/namespace",k="http://www.w3.org/2000/xmlns/",Ie={xml:j,xmlns:k},p=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,Y=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,De=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,Ce=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function D(n){return n===" "||n===`
`||n==="\r"||n==="	"}function V(n){return n==='"'||n==="'"}function ve(n){return n===">"||D(n)}function S(n,e){return n.test(e)}function xe(n,e){return!S(n,e)}var r=0;t.STATE={BEGIN:r++,BEGIN_WHITESPACE:r++,TEXT:r++,TEXT_ENTITY:r++,OPEN_WAKA:r++,SGML_DECL:r++,SGML_DECL_QUOTED:r++,DOCTYPE:r++,DOCTYPE_QUOTED:r++,DOCTYPE_DTD:r++,DOCTYPE_DTD_QUOTED:r++,COMMENT_STARTING:r++,COMMENT:r++,COMMENT_ENDING:r++,COMMENT_ENDED:r++,CDATA:r++,CDATA_ENDING:r++,CDATA_ENDING_2:r++,PROC_INST:r++,PROC_INST_BODY:r++,PROC_INST_ENDING:r++,OPEN_TAG:r++,OPEN_TAG_SLASH:r++,ATTRIB:r++,ATTRIB_NAME:r++,ATTRIB_NAME_SAW_WHITE:r++,ATTRIB_VALUE:r++,ATTRIB_VALUE_QUOTED:r++,ATTRIB_VALUE_CLOSED:r++,ATTRIB_VALUE_UNQUOTED:r++,ATTRIB_VALUE_ENTITY_Q:r++,ATTRIB_VALUE_ENTITY_U:r++,CLOSE_TAG:r++,CLOSE_TAG_SAW_WHITE:r++,SCRIPT:r++,SCRIPT_ENDING:r++},t.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},t.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(t.ENTITIES).forEach(function(n){var e=t.ENTITIES[n],c=typeof e=="number"?String.fromCharCode(e):e;t.ENTITIES[n]=c});for(var Z in t.STATE)t.STATE[t.STATE[Z]]=Z;r=t.STATE;function B(n,e,c){n[e]&&n[e](c)}function A(n,e,c){n.textNode&&L(n),B(n,e,c)}function L(n){n.textNode=ee(n.opt,n.textNode),n.textNode&&B(n,"ontext",n.textNode),n.textNode=""}function ee(n,e){return n.trim&&(e=e.trim()),n.normalize&&(e=e.replace(/\s+/g," ")),e}function U(n,e){return L(n),n.trackPosition&&(e+=`
Line: `+n.line+`
Column: `+n.column+`
Char: `+n.c),e=new Error(e),n.error=e,B(n,"onerror",e),n}function te(n){return n.sawRoot&&!n.closedRoot&&N(n,"Unclosed root tag"),n.state!==r.BEGIN&&n.state!==r.BEGIN_WHITESPACE&&n.state!==r.TEXT&&U(n,"Unexpected end"),L(n),n.c="",n.closed=!0,B(n,"onend"),l.call(n,n.strict,n.opt),n}function N(n,e){if(typeof n!="object"||!(n instanceof l))throw new Error("bad call to strictFail");n.strict&&U(n,e)}function Oe(n){n.strict||(n.tagName=n.tagName[n.looseCase]());var e=n.tags[n.tags.length-1]||n,c=n.tag={name:n.tagName,attributes:{}};n.opt.xmlns&&(c.ns=e.ns),n.attribList.length=0,A(n,"onopentagstart",c)}function X(n,e){var c=n.indexOf(":"),a=c<0?["",n]:n.split(":"),d=a[0],F=a[1];return e&&n==="xmlns"&&(d="xmlns",F=""),{prefix:d,local:F}}function q(n){if(n.strict||(n.attribName=n.attribName[n.looseCase]()),n.attribList.indexOf(n.attribName)!==-1||n.tag.attributes.hasOwnProperty(n.attribName)){n.attribName=n.attribValue="";return}if(n.opt.xmlns){var e=X(n.attribName,!0),c=e.prefix,a=e.local;if(c==="xmlns")if(a==="xml"&&n.attribValue!==j)N(n,"xml: prefix must be bound to "+j+`
Actual: `+n.attribValue);else if(a==="xmlns"&&n.attribValue!==k)N(n,"xmlns: prefix must be bound to "+k+`
Actual: `+n.attribValue);else{var d=n.tag,F=n.tags[n.tags.length-1]||n;d.ns===F.ns&&(d.ns=Object.create(F.ns)),d.ns[a]=n.attribValue}n.attribList.push([n.attribName,n.attribValue])}else n.tag.attributes[n.attribName]=n.attribValue,A(n,"onattribute",{name:n.attribName,value:n.attribValue});n.attribName=n.attribValue=""}function K(n,e){if(n.opt.xmlns){var c=n.tag,a=X(n.tagName);c.prefix=a.prefix,c.local=a.local,c.uri=c.ns[a.prefix]||"",c.prefix&&!c.uri&&(N(n,"Unbound namespace prefix: "+JSON.stringify(n.tagName)),c.uri=a.prefix);var d=n.tags[n.tags.length-1]||n;c.ns&&d.ns!==c.ns&&Object.keys(c.ns).forEach(function(re){A(n,"onopennamespace",{prefix:re,uri:c.ns[re]})});for(var F=0,b=n.attribList.length;F<b;F++){var C=n.attribList[F],v=C[0],P=C[1],_=X(v,!0),w=_.prefix,Ke=_.local,ae=w===""?"":c.ns[w]||"",W={name:v,value:P,prefix:w,local:Ke,uri:ae};w&&w!=="xmlns"&&!ae&&(N(n,"Unbound namespace prefix: "+JSON.stringify(w)),W.uri=w),n.tag.attributes[v]=W,A(n,"onattribute",W)}n.attribList.length=0}n.tag.isSelfClosing=!!e,n.sawRoot=!0,n.tags.push(n.tag),A(n,"onopentag",n.tag),e||(!n.noscript&&n.tagName.toLowerCase()==="script"?n.state=r.SCRIPT:n.state=r.TEXT,n.tag=null,n.tagName=""),n.attribName=n.attribValue="",n.attribList.length=0}function H(n){if(!n.tagName){N(n,"Weird empty close tag."),n.textNode+="</>",n.state=r.TEXT;return}if(n.script){if(n.tagName!=="script"){n.script+="</"+n.tagName+">",n.tagName="",n.state=r.SCRIPT;return}A(n,"onscript",n.script),n.script=""}var e=n.tags.length,c=n.tagName;n.strict||(c=c[n.looseCase]());for(var a=c;e--;){var d=n.tags[e];if(d.name!==a)N(n,"Unexpected close tag");else break}if(e<0){N(n,"Unmatched closing tag: "+n.tagName),n.textNode+="</"+n.tagName+">",n.state=r.TEXT;return}n.tagName=c;for(var F=n.tags.length;F-- >e;){var b=n.tag=n.tags.pop();n.tagName=n.tag.name,A(n,"onclosetag",n.tagName);var C={};for(var v in b.ns)C[v]=b.ns[v];var P=n.tags[n.tags.length-1]||n;n.opt.xmlns&&b.ns!==P.ns&&Object.keys(b.ns).forEach(function(_){var w=b.ns[_];A(n,"onclosenamespace",{prefix:_,uri:w})})}e===0&&(n.closedRoot=!0),n.tagName=n.attribValue=n.attribName="",n.attribList.length=0,n.state=r.TEXT}function Se(n){var e=n.entity,c=e.toLowerCase(),a,d="";return n.ENTITIES[e]?n.ENTITIES[e]:n.ENTITIES[c]?n.ENTITIES[c]:(e=c,e.charAt(0)==="#"&&(e.charAt(1)==="x"?(e=e.slice(2),a=parseInt(e,16),d=a.toString(16)):(e=e.slice(1),a=parseInt(e,10),d=a.toString(10))),e=e.replace(/^0+/,""),isNaN(a)||d.toLowerCase()!==e?(N(n,"Invalid character entity"),"&"+n.entity+";"):String.fromCodePoint(a))}function ne(n,e){e==="<"?(n.state=r.OPEN_WAKA,n.startTagPosition=n.position):D(e)||(N(n,"Non-whitespace before first tag."),n.textNode=e,n.state=r.TEXT)}function ie(n,e){var c="";return e<n.length&&(c=n.charAt(e)),c}function we(n){var e=this;if(this.error)throw this.error;if(e.closed)return U(e,"Cannot write after close. Assign an onready handler.");if(n===null)return te(e);typeof n=="object"&&(n=n.toString());for(var c=0,a="";a=ie(n,c++),e.c=a,!!a;)switch(e.trackPosition&&(e.position++,a===`
`?(e.line++,e.column=0):e.column++),e.state){case r.BEGIN:if(e.state=r.BEGIN_WHITESPACE,a==="\uFEFF")continue;ne(e,a);continue;case r.BEGIN_WHITESPACE:ne(e,a);continue;case r.TEXT:if(e.sawRoot&&!e.closedRoot){for(var d=c-1;a&&a!=="<"&&a!=="&";)a=ie(n,c++),a&&e.trackPosition&&(e.position++,a===`
`?(e.line++,e.column=0):e.column++);e.textNode+=n.substring(d,c-1)}a==="<"&&!(e.sawRoot&&e.closedRoot&&!e.strict)?(e.state=r.OPEN_WAKA,e.startTagPosition=e.position):(!D(a)&&(!e.sawRoot||e.closedRoot)&&N(e,"Text data outside of root node."),a==="&"?e.state=r.TEXT_ENTITY:e.textNode+=a);continue;case r.SCRIPT:a==="<"?e.state=r.SCRIPT_ENDING:e.script+=a;continue;case r.SCRIPT_ENDING:a==="/"?e.state=r.CLOSE_TAG:(e.script+="<"+a,e.state=r.SCRIPT);continue;case r.OPEN_WAKA:if(a==="!")e.state=r.SGML_DECL,e.sgmlDecl="";else if(!D(a))if(S(p,a))e.state=r.OPEN_TAG,e.tagName=a;else if(a==="/")e.state=r.CLOSE_TAG,e.tagName="";else if(a==="?")e.state=r.PROC_INST,e.procInstName=e.procInstBody="";else{if(N(e,"Unencoded <"),e.startTagPosition+1<e.position){var F=e.position-e.startTagPosition;a=new Array(F).join(" ")+a}e.textNode+="<"+a,e.state=r.TEXT}continue;case r.SGML_DECL:if(e.sgmlDecl+a==="--"){e.state=r.COMMENT,e.comment="",e.sgmlDecl="";continue}e.doctype&&e.doctype!==!0&&e.sgmlDecl?(e.state=r.DOCTYPE_DTD,e.doctype+="<!"+e.sgmlDecl+a,e.sgmlDecl=""):(e.sgmlDecl+a).toUpperCase()===_e?(A(e,"onopencdata"),e.state=r.CDATA,e.sgmlDecl="",e.cdata=""):(e.sgmlDecl+a).toUpperCase()===he?(e.state=r.DOCTYPE,(e.doctype||e.sawRoot)&&N(e,"Inappropriately located doctype declaration"),e.doctype="",e.sgmlDecl=""):a===">"?(A(e,"onsgmldeclaration",e.sgmlDecl),e.sgmlDecl="",e.state=r.TEXT):(V(a)&&(e.state=r.SGML_DECL_QUOTED),e.sgmlDecl+=a);continue;case r.SGML_DECL_QUOTED:a===e.q&&(e.state=r.SGML_DECL,e.q=""),e.sgmlDecl+=a;continue;case r.DOCTYPE:a===">"?(e.state=r.TEXT,A(e,"ondoctype",e.doctype),e.doctype=!0):(e.doctype+=a,a==="["?e.state=r.DOCTYPE_DTD:V(a)&&(e.state=r.DOCTYPE_QUOTED,e.q=a));continue;case r.DOCTYPE_QUOTED:e.doctype+=a,a===e.q&&(e.q="",e.state=r.DOCTYPE);continue;case r.DOCTYPE_DTD:a==="]"?(e.doctype+=a,e.state=r.DOCTYPE):a==="<"?(e.state=r.OPEN_WAKA,e.startTagPosition=e.position):V(a)?(e.doctype+=a,e.state=r.DOCTYPE_DTD_QUOTED,e.q=a):e.doctype+=a;continue;case r.DOCTYPE_DTD_QUOTED:e.doctype+=a,a===e.q&&(e.state=r.DOCTYPE_DTD,e.q="");continue;case r.COMMENT:a==="-"?e.state=r.COMMENT_ENDING:e.comment+=a;continue;case r.COMMENT_ENDING:a==="-"?(e.state=r.COMMENT_ENDED,e.comment=ee(e.opt,e.comment),e.comment&&A(e,"oncomment",e.comment),e.comment=""):(e.comment+="-"+a,e.state=r.COMMENT);continue;case r.COMMENT_ENDED:a!==">"?(N(e,"Malformed comment"),e.comment+="--"+a,e.state=r.COMMENT):e.doctype&&e.doctype!==!0?e.state=r.DOCTYPE_DTD:e.state=r.TEXT;continue;case r.CDATA:a==="]"?e.state=r.CDATA_ENDING:e.cdata+=a;continue;case r.CDATA_ENDING:a==="]"?e.state=r.CDATA_ENDING_2:(e.cdata+="]"+a,e.state=r.CDATA);continue;case r.CDATA_ENDING_2:a===">"?(e.cdata&&A(e,"oncdata",e.cdata),A(e,"onclosecdata"),e.cdata="",e.state=r.TEXT):a==="]"?e.cdata+="]":(e.cdata+="]]"+a,e.state=r.CDATA);continue;case r.PROC_INST:a==="?"?e.state=r.PROC_INST_ENDING:D(a)?e.state=r.PROC_INST_BODY:e.procInstName+=a;continue;case r.PROC_INST_BODY:if(!e.procInstBody&&D(a))continue;a==="?"?e.state=r.PROC_INST_ENDING:e.procInstBody+=a;continue;case r.PROC_INST_ENDING:a===">"?(A(e,"onprocessinginstruction",{name:e.procInstName,body:e.procInstBody}),e.procInstName=e.procInstBody="",e.state=r.TEXT):(e.procInstBody+="?"+a,e.state=r.PROC_INST_BODY);continue;case r.OPEN_TAG:S(Y,a)?e.tagName+=a:(Oe(e),a===">"?K(e):a==="/"?e.state=r.OPEN_TAG_SLASH:(D(a)||N(e,"Invalid character in tag name"),e.state=r.ATTRIB));continue;case r.OPEN_TAG_SLASH:a===">"?(K(e,!0),H(e)):(N(e,"Forward-slash in opening tag not followed by >"),e.state=r.ATTRIB);continue;case r.ATTRIB:if(D(a))continue;a===">"?K(e):a==="/"?e.state=r.OPEN_TAG_SLASH:S(p,a)?(e.attribName=a,e.attribValue="",e.state=r.ATTRIB_NAME):N(e,"Invalid attribute name");continue;case r.ATTRIB_NAME:a==="="?e.state=r.ATTRIB_VALUE:a===">"?(N(e,"Attribute without value"),e.attribValue=e.attribName,q(e),K(e)):D(a)?e.state=r.ATTRIB_NAME_SAW_WHITE:S(Y,a)?e.attribName+=a:N(e,"Invalid attribute name");continue;case r.ATTRIB_NAME_SAW_WHITE:if(a==="=")e.state=r.ATTRIB_VALUE;else{if(D(a))continue;N(e,"Attribute without value"),e.tag.attributes[e.attribName]="",e.attribValue="",A(e,"onattribute",{name:e.attribName,value:""}),e.attribName="",a===">"?K(e):S(p,a)?(e.attribName=a,e.state=r.ATTRIB_NAME):(N(e,"Invalid attribute name"),e.state=r.ATTRIB)}continue;case r.ATTRIB_VALUE:if(D(a))continue;V(a)?(e.q=a,e.state=r.ATTRIB_VALUE_QUOTED):(e.opt.unquotedAttributeValues||U(e,"Unquoted attribute value"),e.state=r.ATTRIB_VALUE_UNQUOTED,e.attribValue=a);continue;case r.ATTRIB_VALUE_QUOTED:if(a!==e.q){a==="&"?e.state=r.ATTRIB_VALUE_ENTITY_Q:e.attribValue+=a;continue}q(e),e.q="",e.state=r.ATTRIB_VALUE_CLOSED;continue;case r.ATTRIB_VALUE_CLOSED:D(a)?e.state=r.ATTRIB:a===">"?K(e):a==="/"?e.state=r.OPEN_TAG_SLASH:S(p,a)?(N(e,"No whitespace between attributes"),e.attribName=a,e.attribValue="",e.state=r.ATTRIB_NAME):N(e,"Invalid attribute name");continue;case r.ATTRIB_VALUE_UNQUOTED:if(!ve(a)){a==="&"?e.state=r.ATTRIB_VALUE_ENTITY_U:e.attribValue+=a;continue}q(e),a===">"?K(e):e.state=r.ATTRIB;continue;case r.CLOSE_TAG:if(e.tagName)a===">"?H(e):S(Y,a)?e.tagName+=a:e.script?(e.script+="</"+e.tagName,e.tagName="",e.state=r.SCRIPT):(D(a)||N(e,"Invalid tagname in closing tag"),e.state=r.CLOSE_TAG_SAW_WHITE);else{if(D(a))continue;xe(p,a)?e.script?(e.script+="</"+a,e.state=r.SCRIPT):N(e,"Invalid tagname in closing tag."):e.tagName=a}continue;case r.CLOSE_TAG_SAW_WHITE:if(D(a))continue;a===">"?H(e):N(e,"Invalid characters in closing tag");continue;case r.TEXT_ENTITY:case r.ATTRIB_VALUE_ENTITY_Q:case r.ATTRIB_VALUE_ENTITY_U:var b,C;switch(e.state){case r.TEXT_ENTITY:b=r.TEXT,C="textNode";break;case r.ATTRIB_VALUE_ENTITY_Q:b=r.ATTRIB_VALUE_QUOTED,C="attribValue";break;case r.ATTRIB_VALUE_ENTITY_U:b=r.ATTRIB_VALUE_UNQUOTED,C="attribValue";break}if(a===";"){var v=Se(e);e.opt.unparsedEntities&&!Object.values(t.XML_ENTITIES).includes(v)?(e.entity="",e.state=b,e.write(v)):(e[C]+=v,e.entity="",e.state=b)}else S(e.entity.length?Ce:De,a)?e.entity+=a:(N(e,"Invalid character in entity name"),e[C]+="&"+e.entity+a,e.entity="",e.state=b);continue;default:throw new Error(e,"Unknown state: "+e.state)}return e.position>=e.bufferCheckPosition&&o(e),e}/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */String.fromCodePoint||function(){var n=String.fromCharCode,e=Math.floor,c=function(){var a=16384,d=[],F,b,C=-1,v=arguments.length;if(!v)return"";for(var P="";++C<v;){var _=Number(arguments[C]);if(!isFinite(_)||_<0||_>1114111||e(_)!==_)throw RangeError("Invalid code point: "+_);_<=65535?d.push(_):(_-=65536,F=(_>>10)+55296,b=_%1024+56320,d.push(F,b)),(C+1===v||d.length>a)&&(P+=n.apply(null,d),d.length=0)}return P};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:c,configurable:!0,writable:!0}):String.fromCodePoint=c}()})(i)})(ce);var Q={isArray:function(i){return Array.isArray?Array.isArray(i):Object.prototype.toString.call(i)==="[object Array]"}},Pe=Q.isArray,$={copyOptions:function(i){var t,u={};for(t in i)i.hasOwnProperty(t)&&(u[t]=i[t]);return u},ensureFlagExists:function(i,t){(!(i in t)||typeof t[i]!="boolean")&&(t[i]=!1)},ensureSpacesExists:function(i){(!("spaces"in i)||typeof i.spaces!="number"&&typeof i.spaces!="string")&&(i.spaces=0)},ensureAlwaysArrayExists:function(i){(!("alwaysArray"in i)||typeof i.alwaysArray!="boolean"&&!Pe(i.alwaysArray))&&(i.alwaysArray=!1)},ensureKeyExists:function(i,t){(!(i+"Key"in t)||typeof t[i+"Key"]!="string")&&(t[i+"Key"]=t.compact?"_"+i:i)},checkFnExists:function(i,t){return i+"Fn"in t}},Re=ce,m=$,R=Q.isArray,s,f;function pe(i){return s=m.copyOptions(i),m.ensureFlagExists("ignoreDeclaration",s),m.ensureFlagExists("ignoreInstruction",s),m.ensureFlagExists("ignoreAttributes",s),m.ensureFlagExists("ignoreText",s),m.ensureFlagExists("ignoreComment",s),m.ensureFlagExists("ignoreCdata",s),m.ensureFlagExists("ignoreDoctype",s),m.ensureFlagExists("compact",s),m.ensureFlagExists("alwaysChildren",s),m.ensureFlagExists("addParent",s),m.ensureFlagExists("trim",s),m.ensureFlagExists("nativeType",s),m.ensureFlagExists("nativeTypeAttributes",s),m.ensureFlagExists("sanitize",s),m.ensureFlagExists("instructionHasAttributes",s),m.ensureFlagExists("captureSpacesBetweenElements",s),m.ensureAlwaysArrayExists(s),m.ensureKeyExists("declaration",s),m.ensureKeyExists("instruction",s),m.ensureKeyExists("attributes",s),m.ensureKeyExists("text",s),m.ensureKeyExists("comment",s),m.ensureKeyExists("cdata",s),m.ensureKeyExists("doctype",s),m.ensureKeyExists("type",s),m.ensureKeyExists("name",s),m.ensureKeyExists("elements",s),m.ensureKeyExists("parent",s),m.checkFnExists("doctype",s),m.checkFnExists("instruction",s),m.checkFnExists("cdata",s),m.checkFnExists("comment",s),m.checkFnExists("text",s),m.checkFnExists("instructionName",s),m.checkFnExists("elementName",s),m.checkFnExists("attributeName",s),m.checkFnExists("attributeValue",s),m.checkFnExists("attributes",s),s}function le(i){var t=Number(i);if(!isNaN(t))return t;var u=i.toLowerCase();return u==="true"?!0:u==="false"?!1:i}function M(i,t){var u;if(s.compact){if(!f[s[i+"Key"]]&&(R(s.alwaysArray)?s.alwaysArray.indexOf(s[i+"Key"])!==-1:s.alwaysArray)&&(f[s[i+"Key"]]=[]),f[s[i+"Key"]]&&!R(f[s[i+"Key"]])&&(f[s[i+"Key"]]=[f[s[i+"Key"]]]),i+"Fn"in s&&typeof t=="string"&&(t=s[i+"Fn"](t,f)),i==="instruction"&&("instructionFn"in s||"instructionNameFn"in s)){for(u in t)if(t.hasOwnProperty(u))if("instructionFn"in s)t[u]=s.instructionFn(t[u],u,f);else{var l=t[u];delete t[u],t[s.instructionNameFn(u,l,f)]=l}}R(f[s[i+"Key"]])?f[s[i+"Key"]].push(t):f[s[i+"Key"]]=t}else{f[s.elementsKey]||(f[s.elementsKey]=[]);var o={};if(o[s.typeKey]=i,i==="instruction"){for(u in t)if(t.hasOwnProperty(u))break;o[s.nameKey]="instructionNameFn"in s?s.instructionNameFn(u,t,f):u,s.instructionHasAttributes?(o[s.attributesKey]=t[u][s.attributesKey],"instructionFn"in s&&(o[s.attributesKey]=s.instructionFn(o[s.attributesKey],u,f))):("instructionFn"in s&&(t[u]=s.instructionFn(t[u],u,f)),o[s.instructionKey]=t[u])}else i+"Fn"in s&&(t=s[i+"Fn"](t,f)),o[s[i+"Key"]]=t;s.addParent&&(o[s.parentKey]=f),f[s.elementsKey].push(o)}}function oe(i){if("attributesFn"in s&&i&&(i=s.attributesFn(i,f)),(s.trim||"attributeValueFn"in s||"attributeNameFn"in s||s.nativeTypeAttributes)&&i){var t;for(t in i)if(i.hasOwnProperty(t)&&(s.trim&&(i[t]=i[t].trim()),s.nativeTypeAttributes&&(i[t]=le(i[t])),"attributeValueFn"in s&&(i[t]=s.attributeValueFn(i[t],t,f)),"attributeNameFn"in s)){var u=i[t];delete i[t],i[s.attributeNameFn(t,i[t],f)]=u}}return i}function Be(i){var t={};if(i.body&&(i.name.toLowerCase()==="xml"||s.instructionHasAttributes)){for(var u=/([\w:-]+)\s*=\s*(?:"([^"]*)"|'([^']*)'|(\w+))\s*/g,l;(l=u.exec(i.body))!==null;)t[l[1]]=l[2]||l[3]||l[4];t=oe(t)}if(i.name.toLowerCase()==="xml"){if(s.ignoreDeclaration)return;f[s.declarationKey]={},Object.keys(t).length&&(f[s.declarationKey][s.attributesKey]=t),s.addParent&&(f[s.declarationKey][s.parentKey]=f)}else{if(s.ignoreInstruction)return;s.trim&&(i.body=i.body.trim());var o={};s.instructionHasAttributes&&Object.keys(t).length?(o[i.name]={},o[i.name][s.attributesKey]=t):o[i.name]=i.body,M("instruction",o)}}function Le(i,t){var u;if(typeof i=="object"&&(t=i.attributes,i=i.name),t=oe(t),"elementNameFn"in s&&(i=s.elementNameFn(i,f)),s.compact){if(u={},!s.ignoreAttributes&&t&&Object.keys(t).length){u[s.attributesKey]={};var l;for(l in t)t.hasOwnProperty(l)&&(u[s.attributesKey][l]=t[l])}!(i in f)&&(R(s.alwaysArray)?s.alwaysArray.indexOf(i)!==-1:s.alwaysArray)&&(f[i]=[]),f[i]&&!R(f[i])&&(f[i]=[f[i]]),R(f[i])?f[i].push(u):f[i]=u}else f[s.elementsKey]||(f[s.elementsKey]=[]),u={},u[s.typeKey]="element",u[s.nameKey]=i,!s.ignoreAttributes&&t&&Object.keys(t).length&&(u[s.attributesKey]=t),s.alwaysChildren&&(u[s.elementsKey]=[]),f[s.elementsKey].push(u);u[s.parentKey]=f,f=u}function Ue(i){s.ignoreText||!i.trim()&&!s.captureSpacesBetweenElements||(s.trim&&(i=i.trim()),s.nativeType&&(i=le(i)),s.sanitize&&(i=i.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")),M("text",i))}function Me(i){s.ignoreComment||(s.trim&&(i=i.trim()),M("comment",i))}function Ve(i){var t=f[s.parentKey];s.addParent||delete f[s.parentKey],f=t}function Ge(i){s.ignoreCdata||(s.trim&&(i=i.trim()),M("cdata",i))}function je(i){s.ignoreDoctype||(i=i.replace(/^ /,""),s.trim&&(i=i.trim()),M("doctype",i))}function ke(i){i.note=i}var fe=function(i,t){var u=Re.parser(!0,{}),l={};if(f=l,s=pe(t),u.opt={strictEntities:!0},u.onopentag=Le,u.ontext=Ue,u.oncomment=Me,u.onclosetag=Ve,u.onerror=ke,u.oncdata=Ge,u.ondoctype=je,u.onprocessinginstruction=Be,u.write(i).close(),l[s.elementsKey]){var o=l[s.elementsKey];delete l[s.elementsKey],l[s.elementsKey]=o,delete l.text}return l},ue=$,Ye=fe;function Xe(i){var t=ue.copyOptions(i);return ue.ensureSpacesExists(t),t}var qe=function(i,t){var u,l,o,E;return u=Xe(t),l=Ye(i,u),E="compact"in u&&u.compact?"_parent":"parent","addParent"in u&&u.addParent?o=JSON.stringify(l,function(g,y){return g===E?"_":y},u.spaces):o=JSON.stringify(l,null,u.spaces),o.replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")},T=$,He=Q.isArray,h,I;function We(i){var t=T.copyOptions(i);return T.ensureFlagExists("ignoreDeclaration",t),T.ensureFlagExists("ignoreInstruction",t),T.ensureFlagExists("ignoreAttributes",t),T.ensureFlagExists("ignoreText",t),T.ensureFlagExists("ignoreComment",t),T.ensureFlagExists("ignoreCdata",t),T.ensureFlagExists("ignoreDoctype",t),T.ensureFlagExists("compact",t),T.ensureFlagExists("indentText",t),T.ensureFlagExists("indentCdata",t),T.ensureFlagExists("indentAttributes",t),T.ensureFlagExists("indentInstruction",t),T.ensureFlagExists("fullTagEmptyElement",t),T.ensureFlagExists("noQuotesForNativeAttributes",t),T.ensureSpacesExists(t),typeof t.spaces=="number"&&(t.spaces=Array(t.spaces+1).join(" ")),T.ensureKeyExists("declaration",t),T.ensureKeyExists("instruction",t),T.ensureKeyExists("attributes",t),T.ensureKeyExists("text",t),T.ensureKeyExists("comment",t),T.ensureKeyExists("cdata",t),T.ensureKeyExists("doctype",t),T.ensureKeyExists("type",t),T.ensureKeyExists("name",t),T.ensureKeyExists("elements",t),T.checkFnExists("doctype",t),T.checkFnExists("instruction",t),T.checkFnExists("cdata",t),T.checkFnExists("comment",t),T.checkFnExists("text",t),T.checkFnExists("instructionName",t),T.checkFnExists("elementName",t),T.checkFnExists("attributeName",t),T.checkFnExists("attributeValue",t),T.checkFnExists("attributes",t),T.checkFnExists("fullTagEmptyElement",t),t}function x(i,t,u){return(!u&&i.spaces?`
`:"")+Array(t+1).join(i.spaces)}function G(i,t,u){if(t.ignoreAttributes)return"";"attributesFn"in t&&(i=t.attributesFn(i,I,h));var l,o,E,g,y=[];for(l in i)i.hasOwnProperty(l)&&i[l]!==null&&i[l]!==void 0&&(g=t.noQuotesForNativeAttributes&&typeof i[l]!="string"?"":'"',o=""+i[l],o=o.replace(/"/g,"&quot;"),E="attributeNameFn"in t?t.attributeNameFn(l,o,I,h):l,y.push(t.spaces&&t.indentAttributes?x(t,u+1,!1):" "),y.push(E+"="+g+("attributeValueFn"in t?t.attributeValueFn(o,l,I,h):o)+g));return i&&Object.keys(i).length&&t.spaces&&t.indentAttributes&&y.push(x(t,u,!1)),y.join("")}function Ee(i,t,u){return h=i,I="xml",t.ignoreDeclaration?"":"<?xml"+G(i[t.attributesKey],t,u)+"?>"}function me(i,t,u){if(t.ignoreInstruction)return"";var l;for(l in i)if(i.hasOwnProperty(l))break;var o="instructionNameFn"in t?t.instructionNameFn(l,i[l],I,h):l;if(typeof i[l]=="object")return h=i,I=o,"<?"+o+G(i[l][t.attributesKey],t,u)+"?>";var E=i[l]?i[l]:"";return"instructionFn"in t&&(E=t.instructionFn(E,l,I,h)),"<?"+o+(E?" "+E:"")+"?>"}function Te(i,t){return t.ignoreComment?"":"<!--"+("commentFn"in t?t.commentFn(i,I,h):i)+"-->"}function ge(i,t){return t.ignoreCdata?"":"<![CDATA["+("cdataFn"in t?t.cdataFn(i,I,h):i.replace("]]>","]]]]><![CDATA[>"))+"]]>"}function ye(i,t){return t.ignoreDoctype?"":"<!DOCTYPE "+("doctypeFn"in t?t.doctypeFn(i,I,h):i)+">"}function z(i,t){return t.ignoreText?"":(i=""+i,i=i.replace(/&amp;/g,"&"),i=i.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),"textFn"in t?t.textFn(i,I,h):i)}function Qe(i,t){var u;if(i.elements&&i.elements.length)for(u=0;u<i.elements.length;++u)switch(i.elements[u][t.typeKey]){case"text":if(t.indentText)return!0;break;case"cdata":if(t.indentCdata)return!0;break;case"instruction":if(t.indentInstruction)return!0;break;case"doctype":case"comment":case"element":return!0;default:return!0}return!1}function $e(i,t,u){h=i,I=i.name;var l=[],o="elementNameFn"in t?t.elementNameFn(i.name,i):i.name;l.push("<"+o),i[t.attributesKey]&&l.push(G(i[t.attributesKey],t,u));var E=i[t.elementsKey]&&i[t.elementsKey].length||i[t.attributesKey]&&i[t.attributesKey]["xml:space"]==="preserve";return E||("fullTagEmptyElementFn"in t?E=t.fullTagEmptyElementFn(i.name,i):E=t.fullTagEmptyElement),E?(l.push(">"),i[t.elementsKey]&&i[t.elementsKey].length&&(l.push(de(i[t.elementsKey],t,u+1)),h=i,I=i.name),l.push(t.spaces&&Qe(i,t)?`
`+Array(u+1).join(t.spaces):""),l.push("</"+o+">")):l.push("/>"),l.join("")}function de(i,t,u,l){return i.reduce(function(o,E){var g=x(t,u,l&&!o);switch(E.type){case"element":return o+g+$e(E,t,u);case"comment":return o+g+Te(E[t.commentKey],t);case"doctype":return o+g+ye(E[t.doctypeKey],t);case"cdata":return o+(t.indentCdata?g:"")+ge(E[t.cdataKey],t);case"text":return o+(t.indentText?g:"")+z(E[t.textKey],t);case"instruction":var y={};return y[E[t.nameKey]]=E[t.attributesKey]?E:E[t.instructionKey],o+(t.indentInstruction?g:"")+me(y,t,u)}},"")}function Ne(i,t,u){var l;for(l in i)if(i.hasOwnProperty(l))switch(l){case t.parentKey:case t.attributesKey:break;case t.textKey:if(t.indentText||u)return!0;break;case t.cdataKey:if(t.indentCdata||u)return!0;break;case t.instructionKey:if(t.indentInstruction||u)return!0;break;case t.doctypeKey:case t.commentKey:return!0;default:return!0}return!1}function ze(i,t,u,l,o){h=i,I=t;var E="elementNameFn"in u?u.elementNameFn(t,i):t;if(typeof i>"u"||i===null||i==="")return"fullTagEmptyElementFn"in u&&u.fullTagEmptyElementFn(t,i)||u.fullTagEmptyElement?"<"+E+"></"+E+">":"<"+E+"/>";var g=[];if(t){if(g.push("<"+E),typeof i!="object")return g.push(">"+z(i,u)+"</"+E+">"),g.join("");i[u.attributesKey]&&g.push(G(i[u.attributesKey],u,l));var y=Ne(i,u,!0)||i[u.attributesKey]&&i[u.attributesKey]["xml:space"]==="preserve";if(y||("fullTagEmptyElementFn"in u?y=u.fullTagEmptyElementFn(t,i):y=u.fullTagEmptyElement),y)g.push(">");else return g.push("/>"),g.join("")}return g.push(Ae(i,u,l+1,!1)),h=i,I=t,t&&g.push((o?x(u,l,!1):"")+"</"+E+">"),g.join("")}function Ae(i,t,u,l){var o,E,g,y=[];for(E in i)if(i.hasOwnProperty(E))for(g=He(i[E])?i[E]:[i[E]],o=0;o<g.length;++o){switch(E){case t.declarationKey:y.push(Ee(g[o],t,u));break;case t.instructionKey:y.push((t.indentInstruction?x(t,u,l):"")+me(g[o],t,u));break;case t.attributesKey:case t.parentKey:break;case t.textKey:y.push((t.indentText?x(t,u,l):"")+z(g[o],t));break;case t.cdataKey:y.push((t.indentCdata?x(t,u,l):"")+ge(g[o],t));break;case t.doctypeKey:y.push(x(t,u,l)+ye(g[o],t));break;case t.commentKey:y.push(x(t,u,l)+Te(g[o],t));break;default:y.push(x(t,u,l)+ze(g[o],E,t,u,Ne(g[o],t)))}l=l&&!y.length}return y.join("")}var Fe=function(i,t){t=We(t);var u=[];return h=i,I="_root_",t.compact?u.push(Ae(i,t,0,!0)):(i[t.declarationKey]&&u.push(Ee(i[t.declarationKey],t,0)),i[t.elementsKey]&&i[t.elementsKey].length&&u.push(de(i[t.elementsKey],t,0,!u.length))),u.join("")},Je=Fe,Ze=function(i,t){i instanceof Buffer&&(i=i.toString());var u=null;if(typeof i=="string")try{u=JSON.parse(i)}catch{throw new Error("The JSON structure is invalid")}else u=i;return Je(u,t)},et=fe,tt=qe,nt=Fe,it=Ze,rt={xml2js:et,xml2json:tt,js2xml:nt,json2xml:it};export{rt as l};
